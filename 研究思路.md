# API版本迁移实验研究思路

## 核心想法

我想做的是：当Python库更新版本后，老代码怎么自动改成新版本的API。比如pandas从1.x升到2.x，很多函数名、参数都变了，手动改太麻烦了。

现在已有的工作主要是用大模型生成数据做benchmark，或者用强化学习微调模型。我想试试几个不同的方法，看看哪个效果好，或者能不能组合起来用。

## 三个实验方向

### 方向1：规则+Prompt（先做这个）
最简单直接的方法，从老代码和新代码对比中提取规则（比如"append改成concat"），然后用规则引导模型生成。不需要训练模型，只要设计好Prompt就行。

### 方向2：LoRA微调（第二步）
用小规模参数微调的方法，让模型学会API更新的模式。重点试试只更新模型的深层参数，避免把模型原来会的东西给忘了（灾难性遗忘）。

### 方向3：知识编辑（最后试试）
这个是比较新的想法，直接修改模型内部的知识，不用微调。类似给模型"打补丁"，理论上最快最省资源，但不确定在代码上效果怎么样。

## 实验计划

先把三个方向分别实现，在同一个测试集上跑结果，最后做消融实验，看看每个方法的优缺点，能不能结合起来用。

重点可能会放在LoRA微调的改进上（层次化设计），但三个方向都做了对比会让文章更solid。

---
*更新时间：2025-11-06*

